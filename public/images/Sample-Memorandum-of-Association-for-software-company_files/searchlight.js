(function(){function y(){e.aster_cloud_forcereferer="asterurl"in i?decodeURIComponent(i.asterurl):e.aster_cloud_forcereferer;return e.aster_cloud_forcereferer?e.aster_cloud_forcereferer:undefined}function z(){var a,c,d;a=/^http:\/{2}(?:w{3}.)?(search\.yahoo|search\.aol|google|images\.google|bing|ask)\..*\W(?:q|p|query)=([^&]+)/;var b=/http:\/{2}(?:w{3}.)?(search\.yahoo|search\.aol|google|images\.google|bing|ask)\..*\W(?:q|p|query)=([^&]+)/;switch(o){case "inpage":c="asterreferrer"in i?i.asterreferrer:
document.referrer;a=a;break;case "frame-same":c="asterreferrer"in i?i.asterreferrer:top.document.referrer;a=a;break;case "frame-diff":c="asterreferrer"in i?i.asterreferrer:document.referrer;a=b;break;default:c="asterreferrer"in i?i.asterreferrer:document.referrer;a=a}c=decodeURIComponent(c);if(c.indexOf("://")>-1){b=c.split("://")[1].toLowerCase();if(b.indexOf("asterpix.com")>-1&&b.indexOf("uq=1")>-1)a=o=="frame-diff"?/http:\/{2}(?:w{3}.)?(.*\.asterpix)\..*\W(?:q)=([^&]+)/:/^http:\/{2}(?:w{3}.)?(.*\.asterpix)\..*\W(?:q)=([^&]+)/}if(a=
c.match(new RegExp(a))){t=A(a[1].replace("search.","").replace(/.*\.(asterpix)/,"$1"));a=a[2].indexOf("%20")>-1?a[2].split("%20"):a[2].indexOf(" ")>-1?a[2].split(" "):a[2].split("+");d=[];for(b=0;b<a.length;b++)if(a[b].indexOf(":")<0&&a[b].indexOf("%3A")<0&&a[b].indexOf("%3a")<0)d.push(a[b]);else if(a[b].indexOf("site:")>-1)p=true;if(c.indexOf("http://www.google.com/cse")>-1)p=true;return d.join("+")}return d}function A(a){var c={asterpix:"a",bing:"b",aol:"c",ask:"d",amazon:"e",google:"g","images.google":"g",
live:"l",yahoo:"y"};try{return c[a]}catch(d){return""}}function B(){function a(g){g=g.match(/[\d]+/g);g.length=3;return g.join(".")}var c,d=navigator,b;try{if(typeof d.plugins!="undefined"&&typeof d.plugins["Shockwave Flash"]=="object")b=(c=d.plugins["Shockwave Flash"].description)?a(c):b;else b=a((new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version"))}catch(f){}if(C(b))return"1"}function C(a){var c=false,d=[9,0,27];if(a){a=a.split(" ")[0].split(".");for(var b=0;b<a.length;b++)if(a[b]>
d[b]){c=true;break}else if(a[b]<d[b])break}return c}function u(a){for(var c=a,d=1;document.getElementById(c)!=null;d++){if(!document.getElementById(c).getElementsByTagName("iframe").length)break;c=a+"_"+d}return c}function D(a){e.renderSearchLight=function(g){if(!g.written){g.written=true;var h=g.name.replace("_iframe",""),E=window[h],q=g.contentWindow?g.contentWindow.document:g.contentDocument;q.open("text/html","replace");q.write(E.content);g.contentWindow.searchlight=asterclouds[h].options;q.close();
window.searchlight=undefined;delete asterclouds[h]}};var c="astercloud_"+a+"_iframe",d="astercloud_"+a+"_div";d=u(d);var b=window["astercloud_"+a];a=b.format.split("x")[0];b=b.format.split("x")[1];if(a=="auto"||a=="AUTO")a="100%";var f=[];f.push("<div",' style="text-align:center;"',' id="',d,'">');f.push('<iframe name="',c,'" width="',a,'" height="',b,'" vspace="0" hspace="0" allowtransparency="true" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border:0px" src="about:blank"');
f.push(' onload="',"renderSearchLight(this);",'"');f.push("></iframe>");f.push("</div>");c=f.join("");document.write(c)}function F(a){e.renderSearchLight=function(b,f){var g=window["astercloud_"+f],h=document.createElement("iframe");h.name="astercloud_"+f+"_iframe";h.width=g.format.split("x")[0];if(h.width=="auto"||h.width=="AUTO")h.width="100%";h.height=g.format.split("x")[1];h.vspace=0;h.hspace=0;h.allowTransparency="true";h.scrolling="no";h.marginWidth=0;h.marginHeight=0;h.frameBorder=0;h.style.border=
0;document.getElementById(b).appendChild(h);h.contentWindow.document.write(g.content);h.contentWindow.searchlight=asterclouds["astercloud_"+f].options;h.contentWindow.document.close();delete asterclouds["astercloud_"+f]};var c="astercloud_"+a+"_div";c=u(c);if(!document.getElementById(c)){var d="<div style='text-align:center;' id="+c+">";d+="\n</div>\n";document.write(d)}document.write("<script>renderSearchLight('"+c+"', '"+a+"');<\/script>");e.aster_cloud_header=="0"&&document.write("<script>var sldone = true;<\/script>")}
function G(){e.astercallback=function(a){a.content=a.content.replace("0x0",a.format);window["astercloud_"+a.id]=a;r.msie&&e.aster_cloud_header!="0"?D(a.id):F(a.id)}}function H(){var a;if(top==self){o="inpage";return document.URL}else try{a=top.document.URL;if(!e.aster_cloud_forcereferer)e.aster_cloud_forcereferer="1";o="frame-same";return a}catch(c){if(top==parent){if(!e.aster_cloud_forcereferer)e.aster_cloud_forcereferer="1";o="frame-diff";return a=document.referrer||document.URL}}return document.URL}
function I(a){var c="translate.google:u,images.google:imgrefurl";try{c=c.split(",");var d="",b;if(a.indexOf("://")>-1)d=a.split("://")[1].toLowerCase();else return a;if(d.indexOf("/")>-1)d=d.split("/")[0];for(var f=0;f<c.length;f++){b=c[f].split(":");if(d.indexOf(b[0])>-1){d=a.split("?").join("&");if(d.indexOf("&"+b[1]+"=")>-1){d=d.split("&"+b[1]+"=")[1];if(d.indexOf("&")>-1)return d.split("&")[0]}}}}catch(g){s({api:"searchlight",r:l,fn:"fixURL",msg:g.message+" url="+a,e:g.name,id:e.aster_cloud_id||
"0"})}return a}function v(){try{if(document.URL.indexOf(w)!=-1){var a=location.search.substr(1),c=/fmt=([0-9]+x[0-9]+)/.exec(a);e.aster_cloud_format=c[1];x();e.aster_cloud_id=/id=([0-9]+)/.exec(a)[1]}if(e.aster_cloud_crossdomain)this.crossdomain=e.aster_cloud_crossdomain;this.pageTitle=j.title;this.metaTagKwds=this.metaTagDesc="";this.options={};for(key in m)if(key in e){if(typeof e[key]!="undefined"&&e[key]!=null)this.options[key]=e[key]}else if(typeof m[key].value!="undefined")if(m[key].value!=
null)this.options[key]=m[key].value;n.aster_cloud_width=this.options.aster_cloud_format.split("x")[0];n.aster_cloud_height=this.options.aster_cloud_format.split("x")[1];if(this.options.aster_cloud_debug=="1"){n.aster_cloud_height=parseInt(n.aster_cloud_height)+20;this.options.t=(new Date).getTime();m.t={name:"t"}}this.frameId="astercloud_"+this.options.aster_cloud_id;if("aster_cloud_forcereferer"in this.options&&this.options.aster_cloud_forcereferer!="1"){this.options.aster_cloud_url=this.options.aster_cloud_forcereferer;
this.options.aster_cloud_forcereferer="1"}this.options.aster_cloud_url=I(this.options.aster_cloud_url);G.call(this);J(this.frameId)}catch(d){s({api:"searchlight",r:l,fn:"AsterCloud",msg:d.message,e:d.name,id:e.aster_cloud_id||"0"})}}function J(a){try{var c=document.getElementsByTagName("script"),d=c.length,b;do b=c[--d];while(b.src.indexOf("searchlight.js")<0);d=c=null;do{b=c=b.previousSibling;if(b!=null&&b.nodeName=="A")break}while(b!=null&&b.nodeValue!="Start SearchLight");if(b!=null&&b.nodeName==
"A"){d=b;if(d.href.indexOf("http://www.asterpix.com")>-1){d.id=a+"-logo";d.style.display="none"}}}catch(f){}}function x(){try{e.aster_cloud_forcereferer=top.location.href;if(typeof e.aster_cloud_forcereferer=="undefined")throw"Permission denied";}catch(a){if(j.domain.split(".").length>2){j.domain=j.domain.replace(new RegExp(/^[a-z0-9_\-]+\./i),"");x()}}}function K(){e.aster_cloud_bgColor=null;e.aster_cloud_id=null;e.aster_cloud_debug=null;e.aster_cloud_bgColor=null;e.aster_cloud_primaryTxtColor=null;
e.aster_cloud_secondaryTxtColor=null;e.aster_cloud_bookmark=null}var l=/^\$Revision:\s(\d+)/.exec("$Revision: 32970 $");l=l?l[1]:"0";var e=window,j=document,n={aster_cloud_width:0,aster_cloud_height:0},t,p,o,i=function(){for(var a=location.search.replace("?","").split("&"),c={},d=0;d<a.length;d++){var b=a[d].split("=");c[b[0]]=b[1]}return c}(),m={aster_cloud_build:{name:"bd",value:"33738"},aster_cloud_url:{name:"url",value:H()},aster_cloud_refkwds:{name:"rfkwd",value:z()},aster_cloud_sengine:{name:"s",
value:t},aster_cloud_forcereferer:{name:"fr",value:y()},aster_cloud_hints:{name:"hnt"},aster_cloud_reflink:{name:"rl"},aster_cloud_format:{name:"fmt"},aster_cloud_flash:{name:"tf"},aster_cloud_targetlink:{name:"ltgt"},aster_cloud_source:{name:"qsrc"},aster_cloud_srcurl:{name:"srcurl"},aster_cloud_id:{name:"id"},aster_cloud_filter:{name:"fil"},aster_cloud_quickscan:{name:"qik"},aster_cloud_debug:{name:"dbug"},aster_cloud_preview:{name:"prvw"},aster_cloud_flashversion:{name:"fv",value:B()},aster_cloud_header:{name:"hdr"},
aster_cloud_bgColor:{name:"bg"},aster_cloud_primaryTxtColor:{name:"ptc"},aster_cloud_secondaryTxtColor:{name:"stc"},aster_cloud_bookmark:{name:"bm"},aster_cloud_frameOutput:{name:"fo",value:"json"},aster_cloud_restrictedSearch:{name:"xsrch",value:p},aster_cloud_callback:{name:"cb"},aster_cloud_pageTitle:{name:"mt",value:document.title}},L=("https:"==document.location.protocol?"https:":"http:")+"//www.asterpix.com/tagcloudframe/",w="searchlightdomain.html";v.prototype.build=function(){try{var a="",
c="";for(key in this.options){c=m[key].name+"=";a+=a?"&":"";a+=c+encodeURIComponent(this.options[key]);if(r.msie&&a.length>1950){a=a.substring(0,a.lastIndexOf("&"));break}}var d=n.aster_cloud_width,b=n.aster_cloud_height,f=(this.crossdomain||L+e.aster_cloud_id+"_"+e.aster_cloud_format+"/")+"?"+a;if(this.crossdomain)j.write('<iframe width="'+d+'" src='+f+' height="'+b+'" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe>');else this.options.aster_cloud_frameOutput=="json"?j.write('<script src="'+
f+'"><\/script>'):j.write('<div id="'+this.frameId+'"><iframe name="aster_cloud" width="'+d+'" src='+f+' height="'+b+'" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe></div>')}catch(g){s({api:"searchlight",r:l,fn:"AsterCloud.build",msg:g.message,e:g.name,id:e.aster_cloud_id||"0"})}};var k=navigator.userAgent.toLowerCase(),r={version:(k.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(k),opera:/opera/.test(k),msie:/msie/.test(k)&&!/opera/.test(k),mozilla:/mozilla/.test(k)&&
!/(compatible|webkit)/.test(k)};r.mozilla&&window.addEventListener("unload",function(){return true},false);var s=window.reportError=function(a){var c=(new Date).getTime();a.t=c;a.url=document.URL;var d=c="";for(key in a){d=key+"=";c+=c?"&":"";c+=d+encodeURIComponent(a[key])}a="http://www.asterpix.com/reportjserror/?"+c;if(a.length>2048)a=a.substr(0,2048);var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src",a);var f=document.getElementsByTagName("head")[0];
b.onload=b.onreadystatechange=function(){if(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")f.removeChild(b)};f.appendChild(b)};if(!((typeof e.aster_cloud_id=="undefined"||e.aster_cloud_id==null)&&document.URL.indexOf(w)<0)){asterclouds=typeof asterclouds=="undefined"?{}:asterclouds;(asterclouds["astercloud_"+aster_cloud_id]=new v).build();K()}})();
